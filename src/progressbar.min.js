(function(){"use strict";let progressbar=Array.from(document.getElementsByClassName("progressbar"));progressbar.forEach(bar=>new Progressbar(bar));function Progressbar(bar){var p=["bar","points","pointCount","activePoint","maxIndex","activePointIndex","nextPointIndex","prevPointIndex","onChange"].reduce((p,param)=>{p[param]=null;return p},{});p.bar=bar;p.onChange=new Event("change");initPoints();p.bar.next=__next.bind(p.bar);p.bar.prev=__prev.bind(p.bar);p.bar.pick=__pick.bind(p.bar);function pick(index){p.points.forEach((point,i)=>__setActivePoint(point,(i===index)));p.bar.dispatchEvent(p.onChange)}
function __next(callback){if(p.activePointIndex!==p.nextPointIndex){pick(p.nextPointIndex);if(typeof callback==="function")callback(p)}}
function __prev(callback){if(p.activePointIndex!==p.prevPointIndex){pick(p.prevPointIndex);if(typeof callback==="function")callback(p)}}
function __pick(point,callback){if(p.activePointIndex!==point){pick(point);if(typeof callback==="function")callback(p)}}
function __setActivePoint(point,active){if(active===!0){p.activePoint=point;p.activePointIndex=p.points.indexOf(point);p.nextPointIndex=Math.min((p.activePointIndex+1),p.maxIndex);p.prevPointIndex=Math.max((p.activePointIndex-1),0);point.dataset.active=1}
else{delete point.dataset.active}}
function initPoints(){p.points=Array.from(p.bar.getElementsByTagName("li"));p.points.forEach((point,i)=>{point.className=point.className.concat(" progressbar__item").trim();if(point.dataset.active&&p.activePointIndex===null)
p.activePointIndex=i});p.pointCount=p.points.length;p.maxIndex=p.pointCount-1;pick(p.activePointIndex||0)}}})()
